flowchart TB
    subgraph ClientLayer["Client Layer"]
        WebClient[Web Client]
        APIClient[API Client]
        Console[Management Console]
    end

    subgraph SecurityLayer["Security Layer"]
        subgraph SecureEnclaves["Secure Enclaves"]
            NitroEnclave[AWS Nitro Enclave]
            Attestation[Attestation Service]
            SecureStorage[Secure Storage]
        end

        subgraph PrivacyPreserving["Privacy Preserving"]
            HomomorphicEnc[Homomorphic Encryption]
            DifferentialPrivacy[Differential Privacy]
            FederatedLearning[Federated Learning]
        end

        subgraph MultiPartyComp["Multi-Party Computation"]
            SecureParty[Secure Party]
            SecretSharing[Secret Sharing]
            SecureAgg[Secure Aggregation]
        end
    end

    subgraph DataLayer["Data Layer"]
        EncryptedData[Encrypted Data]
        ModelParams[Model Parameters]
        PrivacyMetrics[Privacy Metrics]
    end

    WebClient --> |1\. Request|APIClient
    APIClient --> |2\. Authenticate|SecurityLayer
    Console --> |3\. Monitor|SecurityLayer

    SecurityLayer --> |4\. Process|DataLayer
    DataLayer --> |5\. Update|SecurityLayer

    subgraph SecureEnclaves
        NitroEnclave --> |6\. Verify|Attestation
        Attestation --> |7\. Store|SecureStorage
    end

    subgraph PrivacyPreserving
        HomomorphicEnc --> |8\. Encrypt|ModelParams
        DifferentialPrivacy --> |9\. Add Noise|PrivacyMetrics
        FederatedLearning --> |10\. Aggregate|ModelParams
    end

    subgraph MultiPartyComp
        SecureParty --> |11\. Share|SecretSharing
        SecretSharing --> |12\. Aggregate|SecureAgg
    end

    classDef client fill:#FFB900,stroke:#333,stroke-width:2px,color:black
    classDef security fill:#107C10,stroke:#333,stroke-width:2px,color:white
    classDef data fill:#0072C6,stroke:#333,stroke-width:2px,color:white

    class WebClient,APIClient,Console client
    class NitroEnclave,Attestation,SecureStorage,HomomorphicEnc,DifferentialPrivacy,FederatedLearning,SecureParty,SecretSharing,SecureAgg security
    class EncryptedData,ModelParams,PrivacyMetrics data 