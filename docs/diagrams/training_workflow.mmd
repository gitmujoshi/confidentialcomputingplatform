flowchart TB
    subgraph DataPrep["Data Preparation"]
        LoadData[Load Data]
        Preprocess[Preprocess]
        Validate[Validate]
    end

    subgraph SecureTraining["Secure Training"]
        subgraph EnclaveInit["Enclave Initialization"]
            InitEnclave[Initialize Enclave]
            VerifyAttest[Verify Attestation]
            LoadKeys[Load Keys]
        end

        subgraph PrivacyPreserving["Privacy Preserving"]
            HomomorphicEnc[Homomorphic Encryption]
            DifferentialPrivacy[Differential Privacy]
            FederatedLearning[Federated Learning]
        end

        subgraph SecureComp["Secure Computation"]
            SecureParty[Secure Party]
            SecretSharing[Secret Sharing]
            SecureAgg[Secure Aggregation]
        end
    end

    subgraph ModelEval["Model Evaluation"]
        SecureInference[Secure Inference]
        PrivacyMetrics[Privacy Metrics]
        ModelValidation[Model Validation]
    end

    LoadData --> |1. Process|Preprocess
    Preprocess --> |2. Validate|Validate
    Validate --> |3. Initialize|InitEnclave

    InitEnclave --> |4. Verify|VerifyAttest
    VerifyAttest --> |5. Load|LoadKeys

    LoadKeys --> |6. Encrypt|HomomorphicEnc
    HomomorphicEnc --> |7. Add Noise|DifferentialPrivacy
    DifferentialPrivacy --> |8. Train|FederatedLearning

    FederatedLearning --> |9. Compute|SecureParty
    SecureParty --> |10. Share|SecretSharing
    SecretSharing --> |11. Aggregate|SecureAgg

    SecureAgg --> |12. Infer|SecureInference
    SecureInference --> |13. Measure|PrivacyMetrics
    PrivacyMetrics --> |14. Validate|ModelValidation

    classDef prep fill:#FFB900,stroke:#333,stroke-width:2px,color:black
    classDef training fill:#107C10,stroke:#333,stroke-width:2px,color:white
    classDef eval fill:#0072C6,stroke:#333,stroke-width:2px,color:white

    class LoadData,Preprocess,Validate prep
    class InitEnclave,VerifyAttest,LoadKeys,HomomorphicEnc,DifferentialPrivacy,FederatedLearning,SecureParty,SecretSharing,SecureAgg training
    class SecureInference,PrivacyMetrics,ModelValidation eval 